<!DOCTYPE html>
<html>
<head>
    <title>In-Game Mailbox</title>
    <style>
        body { background: #050a12; color: white; font-family: sans-serif; }
        .mail-container { max-width: 800px; margin: 50px auto; }
        .mail-item { 
            background: rgba(255,255,255,0.05); 
            padding: 15px; 
            margin-bottom: 10px; 
            border-left: 4px solid #00aeff;
        }
        .sender { color: #ffd100; font-weight: bold; }
    </style>
</head>
<body>
    <div class="mail-container">
        <h1>Your In-Game Mail</h1>
        <div id="mail-list">Loading mail...</div>
    </div>

    <script>
        async function loadMail() {
            const charId = localStorage.getItem('character_id');
            const response = await fetch(`http://127.0.0.1:5000/api/get_mail/${charId}`);
            const data = await response.json();
            
            const list = document.getElementById('mail-list');
            if (data.mail.length === 0) {
                list.innerHTML = "No mail found.";
                return;
            }

            list.innerHTML = data.mail.map(m => `
                <div class="mail-item">
                    <div class="sender">From: ${m.sender}</div>
                    <div class="subject">Subject: ${m.subject}</div>
                    <p>${m.body}</p>
                    ${m.has_items ? 'üéÅ <i>Item Attached</i>' : ''}
                </div>
            `).join('');
        }
        loadMail();
    </script>
</body>
</html>